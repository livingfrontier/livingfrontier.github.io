:PROPERTIES:
:ID:       41571ac8-c055-4744-a67e-39a044622828
:END:
#+title: 数字签名

数字签名用于解决密文的完整性问题，也就是检验是否密文被篡改。

发送方会利用[[id:bd9bdc2b-6beb-47c4-9cf0-2a09ad201841][密码散列]]来给原本的明文生成一个摘要（Digest），摘要的本质是明文的一个压缩镜像，如下所示：

#+DOWNLOADED: screenshot @ 2024-03-26 16:46:48
[[file:img/2024-03-26_16-46-48_screenshot.png]]

然后发送方再将摘要用私钥加密生成签名（Signature），附在明文之后：

#+DOWNLOADED: screenshot @ 2024-03-26 16:49:13
[[file:img/2024-03-26_16-49-13_screenshot.png]]

接受方收到信件后，为了检验完整性，可以用发送方的公钥解密签名，得到摘要，在和自己收到的明文生成的摘要进行比对，如果一致则说明没有被篡改。

#+DOWNLOADED: screenshot @ 2024-03-26 16:55:52
[[file:img/2024-03-26_16-55-52_screenshot.png]]

那么为什么突然要引入摘要这个东西呢？我个人觉得从理论上说，甚至可以直接将一整份明文作为签名，附在明文之后，这样同样可以检验完整性。问题在于非对称加密的性能太差了，所以私钥加密一大段明文太累了，所以我们先用密码散列生成一个较短的摘要，在用私钥加密，提高了性能。

另外突然想到，其实这个明文并不一定需要私钥加密，它可能是一个对称加密过程，接受方收到后要先用对称密钥解密出签名，再用非对称私钥解密签名出摘要。这样比较符合性能要求。
